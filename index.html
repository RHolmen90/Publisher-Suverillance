<!doctype html>
<html lang="" ng-app="SpeedTestViewApp" ng-controller="SpeedTestResultsControler as firstCtrl">
	<head>
		<meta http-equiv="x-ua-compatible" content="ie=edge">
		<title>Page speed test</title>
		<meta charset="utf-8">

		<style type="text/css">
		[ng\:cloak], [ng-cloak], [data-ng-cloak], [x-ng-cloak], .ng-cloak, .x-ng-cloak {
		  display: none !important;
		}
		</style>
		<link href="http://fonts.googleapis.com/css?family=Lato:400,700" rel="stylesheet">
		<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" >
		<link href="content/styles/site-styles.css" rel="stylesheet">
	</head>
	<body ng-cloak>
		<header class="header">
			<nav class="header-nav">
				<a href="#performance" class="active">Performance</a>
				<a href="#main-table">Main Table</a>
				<a href="#count-table">Count Table</a>
			</nav>

			<button class="button-primary js-open-filter" type="button"><i class="fa fa-plus"></i>Add/Remove Columns</button>
			<button
				class="button-link"
				ng-click="firstCtrl.ShowMobile=false; firstCtrl.ShowDesktop=true;"
				ng-class="{active: firstCtrl.ShowDesktop}"
				type="button">
					<i class="fa fa-desktop"></i>Desktop
			</button>
			<button
				class="button-link"
				ng-click="firstCtrl.ShowMobile=true; firstCtrl.ShowDesktop=false;"
				ng-class="{active: firstCtrl.ShowMobile}"
				type="button">
					<i class="fa fa-mobile"></i>Mobile
			</button>
		</header>

		<section class="popup data-table-filter js-data-table-filter">
			<header>
				<h2>Add/Remove Columns</h2>
				<button ng-click="firstCtrl.ClearFilters();firstCtrl.UpdateData();">Deselect All</button>
			</header>
			<div class="form-item form-item--search">
				<i class="fa fa-search"></i><input type="text" ng-model="firstCtrl.SearchFilter" placeholder="Search">
			</div>
			<ul>
				<li ng-repeat="data in firstCtrl.Fillters | filter:firstCtrl.SearchFilter | orderBy:'PrettyName'">
					<div class="form-item--checkbox">
						<label>
							<input
								type="checkbox"
								ng-click="firstCtrl.UpdateData()"
								ng-model="data.Value">
							<i></i>
							<span>
								{{data.PrettyName}}
							</span>
						</label>
					</div>
				</li>
			</ul>
		</section>

		<div class="js-performance-tables-begining" id="performance"></div>
		<section class="data-table data-table--chart" ng-if="firstCtrl.ShowDesktop">
			<h2>Desktop</h2>
			<h2 ng-if="firstCtrl.ChartData.desktop.data.length == 0" class="text-center">No data</h2>

			<table ng-if="firstCtrl.ChartData.desktop.data.length > 0">
				<thead>
					<tr>
						<th>
							Name
						</th>
						<th>
							Old/New
						</th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="page in firstCtrl.ChartData.desktop.data">
						<td>
							<a href="{{firstCtrl.SiteUrl+page.Name}}" target="_blank">{{page.Name}}</a>
						</td>
						<td>
							<div class="data-table-bar" style="width: {{page.scores.old}}%;">
								{{page.scores.old ? page.scores.old : "No data"}}
							</div>
							<div class="data-table-bar" style="width: {{page.scores.new}}%;">
								{{page.scores.new ? page.scores.new : "No data"}}
								<button class="fa fa-info-circle" ng-click="firstCtrl.OpenGoogleSpeedInsightsAdvicesModal(page.Name, 'desktop');" title="Google Speed Insights Advices"></button>
							</div>
						</td>
					</tr>
				</tbody>
			</table>
		</section>

		<section class="data-table data-table--chart" ng-if="firstCtrl.ShowMobile">
			<h2>Mobile</h2>
			<h2 ng-if="firstCtrl.ChartData.mobile.data.length == 0" class="text-center">No data</h2>

			<table ng-if="firstCtrl.ChartData.mobile.data.length > 0">
				<thead>
					<tr>
						<th>
							Name
						</th>
						<th>
							Old/New
						</th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="page in firstCtrl.ChartData.mobile.data">
						<td>
							{{page.Name}}
						</td>
						<td>
							<div class="data-table-bar" style="width: {{page.scores.old}}%;">
								{{page.scores.old ? page.scores.old : "No data"}}
							</div>
							<div class="data-table-bar" style="width: {{page.scores.new}}%;">
								{{page.scores.new ? page.scores.new : "No data"}}
								<button class="fa fa-info-circle" ng-click="firstCtrl.OpenGoogleSpeedInsightsAdvicesModal(page.Name, 'mobile');" title="Google Speed Insights Advices"></button>
							</div>
						</td>
					</tr>
				</tbody>
			</table>
		</section>

		<section class="data-table data-table--zebra" id="main-table">
			<h2 ng-if="firstCtrl.TableData.length == 0" class="text-center">No data</h2>

			<table ng-if="firstCtrl.TableData.length > 0">
				<thead>
					<tr>
						<th
							ng-click="firstCtrl.Sort(firstCtrl.TableData, label.Name)"
							ng-repeat="label in firstCtrl.TableLabels"
							ng-if="firstCtrl.ShowTableElement(label.Name)">
								{{label.PrettyName}}
						</th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="page in firstCtrl.TableData">
						<td
							ng-class="{notPassed: firstCtrl.ScorePassed(page[label.Name], label)}"
							ng-repeat="label in firstCtrl.TableLabels"
							ng-if="firstCtrl.ShowTableElement(label.Name)"
							compile-html="{{firstCtrl.HandleTableValues(page, label)}}">
						</td>
					</tr>
				</tbody>
			</table>
		</section>

		<section class="data-table data-table--zebra" id="count-table">
			<h2 ng-if="firstCtrl.SizesTableData.length == 0" class="text-center">No data</h2>

			<table ng-if="firstCtrl.SizesTableData.length > 0">
				<thead>
					<tr>
						<th
							ng-repeat="label in firstCtrl.SizesTableLabels">
								{{label.PrettyName}}
						</th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="page in firstCtrl.SizesTableData">
						<td
							ng-repeat="label in firstCtrl.SizesTableLabels">
								{{page[label.Name]}}
						</td>
					</tr>
				</tbody>
			</table>
		</section>

		<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>
		<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular-sanitize.js"></script>
		<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
		<script src="//rawgit.com/chinmaymk/angular-charts/bower/dist/angular-charts.min.js"></script>
		<script src="//cdnjs.cloudflare.com/ajax/libs/ng-dialog/0.4.0/js/ngDialog.min.js"></script>
		<script src="SpeedTestViewApp.js"></script>
		<script src="SpeedTestResultsControler.js"></script>
	</body>
</html>
